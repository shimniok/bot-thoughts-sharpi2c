#summary Working code examples for a plethora of platforms

It's easy to interface the I2C adapter with your microcontroller. Here's how. First, you might want to acquaint yourself with the [Protocol protocol] and [Registers registers] used by the I2C Adapter.

Below are examples for: [Examples#Arduino Arduino], [Examples#Galago Galago], [Examples#LPCXpresso LPCXPresso], [Examples#mbed mbed], [Examples#.NET_Micro_Framework .NET Micro Framework], [Examples#Propeller Propeller], [Examples#Raspberry_Pi Raspberry Pi]

= Arduino =
The Wire library is used for all the Arduino and Arduino-compatible offerings (Teensy, Maple, etc.)

{{{
#include <Wire.h>

int addr = 0x26;

void setup() {
  Wire.begin(addr);
  Serial.begin(115200);
  Serial.println("Hello world!\n");
}

void loop() {
  char data[3];
  int value;

  Wire.requestFrom(addr, 2);
  if (Wire.available()) {
    data[0] = Wire.read();
    if (Wire.available()) {
      data[1] = Wire.read();
      value = data[0]<<8 | data[1];
      Serial.print(millis());
      Serial.print(" ");
      Serial.print(value);
      Serial.println();
    }
  }

}
}}}

= Galago =
Galago is a cool new rapid prototyping platform featuring an excellent IDE with built in debugging.

{{{
}}}


= LPCXpresso =
The Embedded Artists LPCXPresso is a series of ARM-based platforms that use the Code Red IDE and toolchain and LPC's implementation of the ARM CMSIS libraries.

{{{
uint16_t value;
uint8_t hibyte, lowbyte;
value = hibyte << 8;
value |= lowbyte;
}}}

= mbed =
The Embedded Artists / NXP mbed is an ARM-based rapid protoyping platform with a hardware abstraction layer similar to Arduino but more powerful.

{{{
#include "mbed.h"

DigitalOut myled(LED1);
I2C i2c(p28, p27);       // sda, scl
Serial pc(USBTX, USBRX); // tx, rx
Timer t;

int addr = 0x26;

int main() {
    
    i2c.frequency(100000);
    pc.baud(115200);
    pc.printf("Hello world!\n");
    t.start();
    t.reset();
    while(1) {
        char data[3];

        if ( i2c.read(addr<<1, data, 2) != 0) {
            pc.printf("no response from %d\n", addr);
        } else {
            int value;
            value = data[0]<<8 | data[1];
            pc.printf("%d %d\n", t.read_ms(), value);
        }
    }
}
}}}


= .NET Micro Framework =
This includes platforms like the FEZ Cerb 40, Netduino, etc., all programmable using Visual Studio and a nicely abstract API.

= Propeller =
The 8-core Parallax Propeller implements I2C in software making for a simple API with flexible, powerful hardware. Here are examples in SPIN.

{{{
CON
  _clkmode      = xtal1 + pll16x
  _xinfreq      = 5_000_000
  _stack        = 50
    
  scl           = 16
  sda           = 17

  addr = $26

OBJ
  i2c : "Basic_I2C_Driver_1"
  Serial : "FullDuplexSerial"

pub Start | val

  dira~
  Serial.start(31, 30, 0, 115200)
  dira[30]~~

  Serial.str(string("Hello world!"))
  Serial.tx(10)
  waitcnt(clkfreq/100 + cnt)

  i2c.Initialize(scl)

  repeat
    i2c.Start(scl)
    i2c.Write(scl, $4d)
    val := i2c.Read(scl, 0)
    val <<= 8
    val |= i2c.Read(scl, 1)
    i2c.Stop(scl)
    Serial.dec(cnt)
    serial.tx(32)
    Serial.dec(val)
    Serial.tx(10)
    waitcnt(clkfreq/100 + cnt)
}}}

= Raspberry Pi =

{{{
}}}